name: ðŸš€ Craft CMS Auto Update & PR

on:
  workflow_dispatch:
    inputs:
      update_type:
        description: 'Art des Updates'
        required: false
        default: 'manual'
        type: choice
        options:
          - manual
          - weekly-schedule
          - security-update
          - dependency-update
          - hotfix
      triggered_by:
        description: 'AusgelÃ¶st durch'
        required: false
        default: 'manual'
        type: choice
        options:
          - manual
          - n8n-automation
          - github-scheduler
          - security-alert
          - emergency
      target_repo:
        description: 'Ziel Repository'
        required: false
        default: 'craft-test-repo'
      skip_tests:
        description: 'Tests Ã¼berspringen?'
        required: false
        default: false
        type: boolean
      priority:
        description: 'Update PrioritÃ¤t'
        required: false
        default: 'normal'
        type: choice
        options:
          - low
          - normal
          - high
          - critical

jobs:
  craft-update:
    name: ðŸ”„ Multi-Input Craft Update
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸ“Š Workflow Context
      id: context
      run: |
        echo "## ðŸŽ¯ Workflow Execution Context"
        echo "**Update Type:** ${{ github.event.inputs.update_type || 'auto-trigger' }}"
        echo "**Triggered By:** ${{ github.event.inputs.triggered_by || 'github-push' }}"
        echo "**Target Repo:** ${{ github.event.inputs.target_repo || 'craft-test-repo' }}"
        echo "**Priority:** ${{ github.event.inputs.priority || 'normal' }}"
        echo "**Skip Tests:** ${{ github.event.inputs.skip_tests || 'false' }}"
        echo "**Timestamp:** $(date)"
        
        # Context fÃ¼r spÃ¤teren Gebrauch
        echo "update_type=${{ github.event.inputs.update_type || 'auto-trigger' }}" >> $GITHUB_OUTPUT
        echo "triggered_by=${{ github.event.inputs.triggered_by || 'github-push' }}" >> $GITHUB_OUTPUT
        echo "is_automated=${{ contains(github.event.inputs.triggered_by, 'n8n') || contains(github.event.inputs.triggered_by, 'scheduler') }}" >> $GITHUB_OUTPUT
        
    # ... rest der Action ...
